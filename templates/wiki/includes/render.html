{% load wiki_tags i18n cache sekizai_tags static wiki_toc %}

<div class="container-fluid wiki-render-container">
  <div class="row gx-5">
    
    <!-- ðŸ§­ Sommaire -->
    <aside class="col-lg-3 col-md-12 mb-4 wiki-toc-container">
      {% build_toc content 4 as toc_html %}
      {% if toc_html %}
        <nav class="wiki-toc">
          <h5 class="wiki-toc-title">Sommaire</h5>
          {{ toc_html|safe }}
        </nav>
      {% endif %}
    </aside>

    <!-- ðŸ“„ Contenu principal -->
    <main class="col-lg-9 col-md-12 wiki-article-container">
      <div class="wiki-article">
        <div id="viewer"></div>

        <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
          <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor-viewer.min.css">

          <script>
          document.addEventListener('DOMContentLoaded', function() {
              const viewer = toastui.Editor.factory({
                  el: document.querySelector('#viewer'),
                  viewer: true,
                  initialValue: `{{ article.current_revision.content|escapejs }}`
              });
          });
        </script>
      </div>
    </main>

  </div>
</div>
